import{j as e,a as h,F as f,M as Z,Q as S,f as X,S as re,T as ge,U as he,V as be,W as ve}from"./vendor-font-awesome-fb8PRCmj.js";import{c as j,H as ee,C as K}from"./index-DVJIb8Cr.js";import{a as Y,I as te}from"./InputLabel-DfrZCBfn.js";import{I as ae}from"./InputIcon-BXu-Qsav.js";import{I as se}from"./InputArea-DPhGCaWx.js";import{F as je}from"./FoldoutIcon-C72KZmKq.js";import{D as J}from"./Divider-CC-zyncc.js";import{T as ye,c as H}from"./capitalizeWords-BTXM6-FP.js";import{y as z}from"./index-BpgUN2na.js";import{B as T}from"./Button-85dFU1bc.js";import{W as oe}from"./warning-CfR5ZzW-.js";import{u as ke}from"./vendor-states-BrjWHaJB.js";import{k as Ne}from"./posts.service-BP_r8Hbi.js";import{o as P,d as L,_ as Q,s as w,u as we,a as _e,f as $}from"./vendor-forms-CXz_4OM6.js";const F=({id:n,label:l,icon:p,error:r,className:g,register:i,required:t,...c})=>{const m=!!r;return e.jsxs("div",{className:j("relative",g),children:[l&&e.jsxs("label",{htmlFor:n,className:j("text-sm font-medium text-mono-700 dark:text-mono-300",m?"text-red-500":""),children:[l," ",t&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative mt-1",children:[p&&e.jsx(ae,{icon:p,hasError:m}),e.jsx("input",{id:n,...i?.(n),...c,required:t,className:j(`w-full px-3 py-2 rounded-md text-sm font-sans focus:outline-none border 
                        border-mono-300 dark:border-mono-600
                        focus:ring-2 focus:ring-pink-400 focus:border-transparent 
                        bg-white dark:bg-mono-700 text-mono-900 dark:text-mono-100
                        placeholder-mono-400 dark:placeholder-mono-500
                        disabled:opacity-50 disabled:cursor-not-allowed`,m?`border-red-500 bg-red-50 dark:bg-red-900/20 
                        focus:ring-2 focus:ring-red-400 focus:border-red-500`:"",p?"pl-10":"")})]}),m&&e.jsx(Y,{errorMessage:r?.message??""})]})},W=({id:n,label:l,icon:p,error:r,className:g,register:i,options:t,placeholder:c,required:m,...k})=>{const b=!!r;return e.jsxs("div",{className:j("relative",g),children:[l&&e.jsxs("label",{htmlFor:n,className:j("text-sm font-medium text-mono-700 dark:text-mono-300",b?"text-red-500":""),children:[l," ",m&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative mt-1",children:[p&&e.jsx(ae,{icon:p,hasError:b}),e.jsxs("select",{id:n,...i?.(n),...k,defaultValue:k.value||"",className:j(`w-full px-3 py-2 rounded-md text-sm font-sans focus:outline-none border 
                        border-mono-300 dark:border-mono-600
                        focus:ring-2 focus:ring-pink-400 focus:border-transparent 
                        bg-white dark:bg-mono-700 text-mono-900 dark:text-mono-100
                        appearance-none cursor-pointer
                        disabled:opacity-50 disabled:cursor-not-allowed`,b?`border-red-500 bg-red-50 dark:bg-red-900/20
                            focus:ring-2 focus:ring-red-400 focus:border-red-500`:"",p?"pl-10":""),children:[c&&e.jsx("option",{value:"",disabled:!0,className:"bg-white dark:bg-mono-700 text-mono-500",children:c}),t.map(y=>e.jsx("option",{value:y.value,className:"bg-white dark:bg-mono-700 text-mono-900 dark:text-mono-100",children:y.label},y.value))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx("svg",{className:"w-5 h-5 text-mono-400 dark:text-mono-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),b&&e.jsx(Y,{errorMessage:r?.message??""})]})},O=({className:n,children:l,title:p,defaultOpen:r=!1})=>{const[g,i]=h.useState(r),t=()=>i(!g);return e.jsxs("div",{className:j("bg-white dark:bg-mono-800 rounded-lg shadow-sm border border-mono-200 dark:border-mono-700 p-2",n),children:[e.jsxs("div",{onClick:t,className:"cursor-pointer flex items-center justify-between text-sm",children:[e.jsx("h3",{className:"font-semibold",children:p}),e.jsx(je,{isOpen:g})]}),g&&e.jsx("div",{className:"mt-2",children:l})]})},Ce=({text:n,enabled:l=!0,children:p,className:r})=>e.jsxs("div",{className:j("group relative",r),children:[p,e.jsxs("span",{className:j(`text-xs font-medium text-white bg-gray-900 dark:bg-gray-100 
                dark:text-gray-900 rounded-md pointer-events-none
                transition-opacity whitespace-nowrap z-10 opacity-0 
                absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-1.5`,l&&"group-hover:opacity-100 transition-opacity"),children:[n,e.jsx("span",{className:`absolute top-full left-1/2 -translate-x-1/2 -mt-1 
                rotate-45 w-2 h-2 bg-gray-900 dark:bg-gray-100`})]})]}),Te=({label:n,tags:l,className:p,required:r,onAddTag:g,onRemoveTag:i,error:t})=>{const[c,m]=h.useState(""),k=()=>{const a=c.trim().toLowerCase();a&&!l.find(v=>v.value===a)&&(g?.(a),m(""))},b=a=>{a.forEach(v=>{v&&!l.find(R=>R.value===v)&&g?.(v)})},y=a=>{i?.(a)},I=a=>{(a.key==="Enter"||a.key===",")&&(a.preventDefault(),k()),a.key==="Backspace"&&!c&&l.length&&y(l.length-1)},C=a=>{a.preventDefault();const R=a.clipboardData.getData("text").split("#").map(U=>U.trim().toLowerCase()).filter(Boolean);b(R),m("")};return e.jsxs("div",{className:j("relative",p),children:[n&&e.jsx(te,{className:"mb-2",isRequired:r,children:n}),e.jsxs("div",{className:j(`flex flex-wrap gap-2 px-4 py-3 rounded-lg border
                     bg-white dark:bg-mono-700
                     border-mono-200 dark:border-mono-600
                     focus-within:ring-2 focus-within:ring-pink-400
                     focus-within:border-transparent`),children:[l.map((a,v)=>e.jsx(Ce,{enabled:!!a.error,text:a.error??"",children:e.jsxs(ye,{className:j("flex flex-row gap-1 hover:bg-primary-200 dark:hover:bg-primary-700",a.error&&"bg-red-100 dark:bg-red-800 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-600 opacity-50"),onClick:()=>y(v),children:["#",a.value,e.jsx("span",{children:"Ã—"})]})},a.value)),e.jsx("input",{className:`flex-1 min-w-30 bg-transparent outline-none
                    text-mono-900 dark:text-mono-100
                    placeholder-mono-400 dark:placeholder-mono-500`,onChange:a=>m(a.target.value),onKeyDown:I,value:c,onPaste:C})]}),t&&e.jsx(Y,{errorMessage:t})]})};async function ne(n){const l=new FormData;l.append("key","855374cae6cc64ebc83ea620f74edde1"),l.append("image",n),l.append("name",crypto.randomUUID());const p=await fetch("https://api.imgbb.com/1/upload",{method:"POST",body:l}),r=await p.json();if(!r.success)throw new Error(`Failed to upload image, status ${p.status}`);return console.info("Image successfully uploaded",r),{...r.data,deleteUrl:r.data.delete_url}}const Ie=({images:n,allowCopyPaste:l=!1,onChange:p,maxImages:r=20,className:g=""})=>{const[i,t]=h.useState(n??[]),[c,m]=h.useState(!1),[k,b]=h.useState(!1),y=h.useRef(null),I=s=>{t(s),p?.(s)},C=async s=>{if(!s.type.startsWith("image/")){z.error("Please select a valid image file");return}try{return await ne(s)}catch(x){throw x instanceof Error?x.message:"Upload failed"}},a=async s=>{if(!s)return;const x=Array.from(s);if(x.length+i.length>r){z.error(`You can upload a maximum of ${r} images.`);return}m(!0);try{const _=x.map(B=>C(B)),D=await Promise.all(_),G=[...i,...D.filter(B=>!!B)];I(G),z.success("Images uploaded successfully")}catch(_){z.error(_ instanceof Error?_.message:"Upload failed")}finally{m(!1)}},v=s=>{a(s.target.files),y.current&&(y.current.value="")},R=s=>{s.preventDefault(),b(!1),a(s.dataTransfer.files)},U=s=>{s.preventDefault(),b(!0)},M=()=>b(!1),E=h.useCallback(s=>{if(!l)return;const x=s.clipboardData?.items;if(x){for(const _ of x)if(_.type.startsWith("image/")){const D=_.getAsFile();D&&i.length<r&&(s.preventDefault(),C(D));break}}},[i.length,r]);h.useEffect(()=>(document.addEventListener("paste",E),()=>document.removeEventListener("paste",E)),[E]);const A=s=>{const x=i.filter((_,D)=>D!==s);console.error("Remove image called"),I(x)},q=s=>{navigator.clipboard.writeText(s),z.success("Content copied to clipboard!")},V=()=>y.current?.click(),u=i.length<r;return e.jsxs("div",{className:j("w-full select-none space-y-4",g),children:[e.jsx("input",{ref:y,type:"file",accept:"image/*",multiple:!0,onChange:v,className:"hidden"}),i.length>0&&e.jsx("div",{className:"space-y-3",children:i.map((s,x)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-mono-50 dark:bg-mono-800/50 rounded-lg border border-mono-200 dark:border-mono-700",children:[e.jsx("img",{src:s.thumb.url,alt:"Preview",className:"w-16 h-16 object-cover rounded-md border border-mono-300 dark:border-mono-600"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-mono-900 dark:text-mono-100 truncate",children:s.id||`Image ${x+1}`}),e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>{s.url&&q(s.url)},className:"text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1 mt-1",children:[e.jsx(f,{icon:Z,className:"text-xs"}),"Copy URL"]}),e.jsxs("button",{type:"button",onClick:()=>q(`![${s.id}](${s.url})`),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1 mt-1",children:[e.jsx(f,{icon:Z,className:"text-xs"}),"Copy Markdown"]}),e.jsxs("button",{type:"button",onClick:()=>{s.deleteUrl&&q(s.deleteUrl)},className:"text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1 mt-1",children:[e.jsx(f,{icon:S,className:"text-xs"}),"Copy delete URL"]})]})]}),e.jsx("button",{onClick:()=>A(x),disabled:c,type:"button",className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-full transition",title:"Remove",children:e.jsx(f,{icon:S})})]},s.id||s.url))}),u&&e.jsx("div",{onDrop:R,onDragOver:U,onDragLeave:M,onClick:V,className:j("border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors",k?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-mono-300 dark:border-mono-600 hover:border-mono-400 dark:hover:border-mono-500",c&&"opacity-50 cursor-not-allowed"),children:c?e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx(f,{icon:X,spin:!0,className:"text-3xl text-mono-600 dark:text-mono-400"}),e.jsx("p",{className:"text-sm text-mono-600 dark:text-mono-400",children:"Uploading..."})]}):e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(f,{icon:re,className:"text-4xl text-mono-400 dark:text-mono-500"}),e.jsx("p",{className:"text-sm font-medium text-mono-700 dark:text-mono-300",children:"Drop images here or click to upload"}),e.jsxs("div",{className:"flex gap-6 text-xs text-mono-500 dark:text-mono-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(f,{icon:ge})," Click"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(f,{icon:he})," Drag & drop"]}),l&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(f,{icon:be})," Paste"]})]}),e.jsxs("p",{className:"text-xs text-mono-500",children:[i.length,"/",r," images"]})]})}),!u&&i.length>0&&e.jsxs("p",{className:"text-center text-sm text-mono-500 dark:text-mono-400",children:["Maximum ",r," images reached"]})]})},le=["person","franchise","event","other"],ie=["safe","mature","explicit"],ce=["gender","orientation","age","personality","race","body"],de=["guest","admin","moderator","acolyte","high-priest","cult-leader"],Re=P({value:w().min(3,{message:"Tag must be at least 3 characters long"})}),qe=P({url:w().optional(),name:w().min(3,{message:"Reference name must be at least 3 characters long"}),picture_url:w().optional(),description:w().optional(),type:Q(le,{message:"Invalid reference type"})}),De=P({from_value:w().min(1,{message:'Transformation "From" value is required'}),to_value:w().min(1,{message:'Transformation "To" value is required'}),type:Q(ce,{message:"Invalid transformation type"})}),Fe=P({text:w().min(1,{message:"Warning text is required"}),level:Q(oe,{message:"Invalid warning level"})}),Se=P({id:w().min(1,{message:"Related post ID is required"})}),Ue=P({role_key:Q(de)}),Ee=P({slug:w().optional(),title:w().min(1,{message:"Title cannot be empty"}),summary:w().min(1,{message:"Summary cannot be empty"}),tags:L(Re,{message:"Tags are required and must have at least 3 characters"}),picture_url:w().min(1,{message:"A preview picture is required"}),content:w().min(1,{message:"Content cannot be empty"}),transformations:L(De,{message:"At least one transformation is required"}),post_references:L(qe,{message:"At least one reference is required"}),warnings:L(Fe,{message:"At least one warning is required"}),explicitness:Q(ie,{message:"Invalid explicitness level"}),related_posts:L(Se,{message:"At least one related post is required"}),required_roles:L(Ue)}),Ae=({allowCopyPaste:n=!0,onUploadComplete:l,onUploadFailed:p,onReset:r,onError:g,className:i="",initialImageUrl:t})=>{const[c,m]=h.useState(!1),[k,b]=h.useState(void 0),[y,I]=h.useState(!1),C=h.useRef(null),a=h.useCallback(u=>{g?.(u),z.error(u),m(!1)},[g]),v=async u=>{if(!u.type.startsWith("image/")){a("Please select a valid image file");return}m(!0);try{const s=await ne(u);b(s),l?.(s)}catch(s){a(s instanceof Error?s.message:"Upload failed"),p?.()}finally{m(!1)}},R=u=>{const s=u.target.files?.[0];s&&v(s)},U=u=>{u.preventDefault(),I(!1);const s=u.dataTransfer.files[0];s&&v(s)},M=u=>{u.preventDefault(),I(!0)},E=u=>{u.preventDefault(),I(!1)},A=h.useCallback(u=>{if(!n)return;const s=u.clipboardData?.items;if(s){for(const x of s)if(x.type.startsWith("image/")){const _=x.getAsFile();if(_){u.preventDefault(),v(_);break}}}},[n]);h.useEffect(()=>(document.addEventListener("paste",A),()=>document.removeEventListener("paste",A)),[A]),h.useEffect(()=>{t&&b({thumb:{mime:"",name:"",extension:"",filename:"",url:t}})},[t]);const q=()=>C.current?.click(),V=()=>{b(void 0),C.current&&(C.current.value=""),r?.()};return e.jsxs("div",{className:j("w-fit select-none",i),children:[e.jsx("input",{ref:C,type:"file",accept:"image/*",onChange:R,className:"hidden"}),k?e.jsxs("div",{className:"relative inline-block group",children:[e.jsx("img",{src:k.thumb.url,alt:"Uploaded",className:"w-32 h-32 object-cover rounded-lg border-2 border-mono-300 dark:border-mono-600"}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 rounded-lg flex items-center justify-center gap-3 transition-opacity",children:[e.jsx("button",{onClick:q,disabled:c,className:"p-2.5 bg-white/90 dark:bg-mono-800/90 rounded-full hover:bg-white dark:hover:bg-mono-700",title:"Change image",children:e.jsx(f,{icon:ve,className:"text-sm"})}),e.jsx("button",{onClick:V,disabled:c,className:"p-2.5 bg-white/90 dark:bg-mono-800/90 rounded-full hover:bg-white dark:hover:bg-mono-700",title:"Remove image",children:e.jsx(f,{icon:S,className:"text-sm"})})]}),c&&e.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-lg flex items-center justify-center",children:e.jsx(f,{icon:X,spin:!0,className:"text-white text-xl"})})]}):e.jsx("div",{onClick:q,onDrop:U,onDragOver:M,onDragLeave:E,className:j("w-32 h-32 rounded-lg border-2 border-dashed flex flex-col items-center justify-center cursor-pointer transition-all gap-2",y?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-mono-400 dark:border-mono-600 hover:border-mono-500 dark:hover:border-mono-500",c&&"opacity-60 cursor-not-allowed"),children:c?e.jsx(f,{icon:X,spin:!0,className:"text-3xl text-mono-500"}):e.jsxs(e.Fragment,{children:[e.jsx(f,{icon:re,className:"text-3xl text-mono-500 dark:text-mono-400"}),e.jsx("span",{className:"text-xs text-mono-600 dark:text-mono-400 text-center px-2 leading-tight",children:n?`Click, drag & drop,
or paste image`:`Click or drag & drop
image here`})]})})]})},Je=({state:n,onSubmit:l})=>{const{handleSubmit:p,formState:{errors:r,isValid:g},control:i,register:t,trigger:c,setValue:m}=we({resolver:_e(Ee),defaultValues:n??{slug:"",title:"",summary:"",picture_url:"",content:"",tags:[],transformations:[],explicitness:"safe",post_references:[]},mode:"onBlur"});h.useEffect(()=>{function d(){n?.picture_url&&m("picture_url",n.picture_url)}d()},[m,n?.picture_url]);const{data:k,isPending:b}=ke({queryKey:["posts-id-with-title"],queryFn:Ne}),{fields:y,append:I,remove:C}=$({name:"tags",control:i}),{fields:a,append:v,remove:R}=$({name:"transformations",control:i}),{fields:U,append:M,remove:E}=$({name:"post_references",control:i}),{fields:A,append:q,remove:V}=$({name:"warnings",control:i}),{fields:u,append:s,remove:x}=$({name:"related_posts",control:i}),{fields:_,append:D,remove:G}=$({name:"required_roles",control:i}),B=d=>{I({value:d}),c("tags")},me=d=>{C(d),c("tags")},{ref:pe,...ue}=t("summary"),{ref:xe,...fe}=t("content");return b?e.jsx(e.Fragment,{children:"Loading..."}):e.jsxs("form",{className:"flex flex-col gap-4",noValidate:!0,onSubmit:p(async d=>await l?.(d)),children:[e.jsx(ee,{children:"Main content"}),e.jsx(F,{required:!0,id:"title",label:"Title",type:"text",register:t,error:r.title}),e.jsx(se,{required:!0,id:"summary",label:"Summary",type:"text",...ue,ref:pe,register:t,error:r.summary}),e.jsxs(O,{title:"Required Subscriptions",children:[e.jsx("div",{className:"flex flex-col gap-2",children:_.map((d,o)=>e.jsxs(K,{variant:"squared",className:"flex flex-col md:flex-row gap-4 p-2 dark:bg-mono-900/30",children:[e.jsx(W,{id:`required_roles.${o}.role_key`,register:t,options:de.map(N=>({label:H(N),value:N})),placeholder:"Type",className:"grow"}),e.jsx(T,{size:"small",shape:"square",type:"button",variant:"link",className:"max-h-13",onClick:()=>G(o),children:e.jsx(f,{icon:S})})]},d.id))}),e.jsx(T,{className:"max-w-60 mt-3",type:"button",size:"small",shape:"square",variant:"outline",onClick:()=>D({role_key:"acolyte"}),children:"Add warning"})]}),e.jsx(W,{id:"explicitness",register:t,label:"Explicitness",options:ie.map(d=>({label:H(d),value:d})),placeholder:"Type"}),e.jsx(te,{isRequired:!0,children:"Preview picture"}),e.jsx(Ae,{initialImageUrl:n?.picture_url,onUploadComplete:d=>{m("picture_url",d.thumb.url),c("picture_url")},onUploadFailed:()=>{m("picture_url",""),c("picture_url")},onReset:()=>{m("picture_url",""),c("picture_url")}}),r.picture_url?.message&&e.jsx(Y,{errorMessage:r.picture_url?.message}),e.jsx(se,{required:!0,id:"content",label:"Content",ref:xe,...fe,error:r.content}),e.jsx(O,{title:"Images Uploader",children:e.jsx(Ie,{})}),e.jsx(J,{}),e.jsx(ee,{children:"Optional content"}),e.jsx(Te,{label:"Tags",tags:y.map((d,o)=>({value:d.value,error:r.tags?.[o]?.value?.message})),onAddTag:B,onRemoveTag:me,error:r.tags?.message}),e.jsx(J,{}),e.jsxs(O,{title:"Transformations",children:[e.jsx("div",{className:"flex flex-col gap-2",children:a.map((d,o)=>e.jsxs(K,{className:"flex flex-col md:flex-row gap-4 p-2 dark:bg-mono-900/30",children:[e.jsx(F,{id:`transformations.${o}.from_value`,placeholder:"From",register:t,error:r.transformations?.[o]?.from_value}),e.jsx(F,{id:`transformations.${o}.to_value`,placeholder:"To",register:t,error:r.transformations?.[o]?.to_value}),e.jsx(W,{id:`transformations.${o}.type`,register:t,options:ce.map(N=>({label:H(N),value:N})),placeholder:"Type",className:"grow"}),e.jsx(T,{size:"small",shape:"square",type:"button",variant:"link",className:"max-h-13",onClick:()=>R(o),children:e.jsx(f,{icon:S})})]},d.id))}),e.jsx(T,{className:"max-w-60 mt-3",type:"button",size:"small",shape:"square",variant:"outline",onClick:()=>v({from_value:"",to_value:"",type:"gender"}),children:"Add transformation"})]}),e.jsxs(O,{title:"References",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:U.map((d,o)=>e.jsxs(K,{className:"flex flex-col gap-4 p-4 dark:bg-mono-900/30",children:[e.jsx(F,{id:`post_references.${o}.name`,placeholder:"Name",register:t,error:r.post_references?.[o]?.name}),e.jsx(W,{id:`post_references.${o}.type`,register:t,options:le.map(N=>({label:H(N),value:N})),placeholder:"Type"}),e.jsx(J,{}),e.jsx(F,{id:`post_references.${o}.url`,placeholder:"URL",register:t,error:r.post_references?.[o]?.url}),e.jsx(F,{id:`post_references.${o}.picture_url`,placeholder:"Picture URL",register:t,error:r.post_references?.[o]?.picture_url}),e.jsx(F,{id:`post_references.${o}.description`,placeholder:"Description",register:t,error:r.post_references?.[o]?.description}),e.jsx(T,{size:"small",shape:"square",type:"button",variant:"link",className:"max-h-13",onClick:()=>E(o),children:e.jsx(f,{icon:S})})]},d.id))}),e.jsx(T,{className:"max-w-40 mt-3",size:"small",shape:"square",type:"button",variant:"outline",onClick:()=>M({name:"",url:"",description:"",picture_url:"",type:"person"}),children:"Add reference"})]}),e.jsxs(O,{title:"Warnings",children:[e.jsx("div",{className:"flex flex-col gap-2",children:A.map((d,o)=>e.jsxs(K,{variant:"squared",className:"flex flex-col md:flex-row gap-4 p-2 dark:bg-mono-900/30",children:[e.jsx(F,{id:`warnings.${o}.text`,placeholder:"Text",register:t,error:r.warnings?.[o]?.text}),e.jsx(W,{id:`warnings.${o}.level`,register:t,options:oe.map(N=>({label:H(N),value:N})),placeholder:"Type",className:"grow"}),e.jsx(T,{size:"small",shape:"square",type:"button",variant:"link",className:"max-h-13",onClick:()=>V(o),children:e.jsx(f,{icon:S})})]},d.id))}),e.jsx(T,{className:"max-w-60 mt-3",type:"button",size:"small",shape:"square",variant:"outline",onClick:()=>q({text:"",level:"mild"}),children:"Add warning"})]}),k&&k.length>0&&e.jsxs(O,{title:"Related posts",children:[e.jsx("div",{className:"flex flex-col gap-2",children:u.map((d,o)=>e.jsxs(K,{variant:"squared",className:"flex flex-col md:flex-row gap-4 p-2 dark:bg-mono-900/30",children:[e.jsx(W,{id:`related_posts.${o}.id`,register:t,options:k.map(N=>({value:N.id.toString(),label:N.title})),placeholder:"Type",className:"grow"}),e.jsx(T,{size:"small",shape:"square",type:"button",variant:"link",className:"max-h-13",onClick:()=>x(o),children:e.jsx(f,{icon:S})})]},d.id))}),e.jsx(T,{className:"max-w-60 mt-3",type:"button",variant:"outline",size:"small",shape:"square",onClick:()=>s({id:k[0].id.toString()}),children:"Add related post"})]}),e.jsx("div",{className:"flex grow justify-center items-center",children:e.jsx(T,{disabled:!g,variant:"submit",type:"submit",className:"max-w-md grow",children:"Submit"})})]})};export{Je as E};
