import{a as i,j as r}from"./vendor-font-awesome-fb8PRCmj.js";import{C as d,q as c}from"./index-lBioDFl4.js";import{P as l}from"./PageHeader-1TgteFVd.js";import{u as f}from"./useDocumentTitle-CWGRdlYI.js";import{E as P}from"./EditPostForm-D3uazptG.js";import{f as x,j as y}from"./posts.service-CMgQtzql.js";import{y as p}from"./index-CcAK1yoR.js";import{b as g,e as j}from"./vendor-react-Cx4ePrNi.js";import"./vendor-states-CBI6bQG0.js";import"./appMeta-B1yHDSiB.js";import"./InputLabel-DqjUQIAl.js";import"./InputIcon-B7ia0x9Z.js";import"./InputArea-Dr2i9MUp.js";import"./FoldoutIcon-C72KZmKq.js";import"./Divider-BLVUVjaf.js";import"./capitalizeWords-C3LnHOhm.js";import"./Button-C3YJ6iVm.js";import"./warning-CfR5ZzW-.js";import"./vendor-forms-CXz_4OM6.js";const $=()=>{const m=g();f("Edit post");const{id:t}=j(),[o,n]=i.useState();return i.useEffect(()=>{async function s(){if(!t)return;const e=parseInt(t),a=await y(e);n({...a,related_posts:a.related_posts.map(u=>({id:u.id.toString()}))})}s()},[]),!t||!o?null:r.jsxs("div",{className:"container mx-auto px-4 max-w-7xl",children:[r.jsx(l,{title:"Create Post",subtitle:"Create new story..."}),r.jsx(d,{children:r.jsx(P,{state:o,onSubmit:async s=>{try{await x(parseInt(t),{...s,related_posts:s.related_posts.map(e=>({id:parseInt(e.id)}))}),await c.invalidateQueries({queryKey:["post",t]}),p.success("Post updated successfully!"),m(`/posts/${t}`)}catch{p.error("There was an error updating the post. Please try again later.")}}})})]})};export{$ as default};
