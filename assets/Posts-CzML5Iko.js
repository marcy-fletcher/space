const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Filters-CimIQTUV.js","assets/vendor-font-awesome-fb8PRCmj.js","assets/index-DVJIb8Cr.js","assets/vendor-react-Cx4ePrNi.js","assets/vendor-states-BrjWHaJB.js","assets/index-COJnJjyW.css","assets/posts.service-BP_r8Hbi.js","assets/AvailablePostCard--FnQQofK.js","assets/formatDate-HarhDgxf.js","assets/capitalizeWords-BTXM6-FP.js","assets/warning-CfR5ZzW-.js","assets/ReactionsGroup-DPcz6rW_.js","assets/LinkButton-CximMrm9.js","assets/UnavailablePostCard-BMRVFoQ1.js","assets/Subtitle-BGRHiaIL.js","assets/Badge-KlCDyamb.js"])))=>i.map(i=>d[i]);
import{C as j,c as y,u as v,q as N,_ as f}from"./index-DVJIb8Cr.js";import{a as l,j as e,F as c,u as b,d as k,v as P,w,x as S,R as _,y as C}from"./vendor-font-awesome-fb8PRCmj.js";import{u as x,g as E,d as g,a as I}from"./posts.service-BP_r8Hbi.js";import{B as p}from"./Button-85dFU1bc.js";import{u as L}from"./vendor-states-BrjWHaJB.js";import{a as A}from"./vendor-react-Cx4ePrNi.js";import{P as F}from"./PageHeader-1TgteFVd.js";import{u as R}from"./useDocumentTitle-1xR-jf3b.js";import{u as T}from"./usePageLog-Cwne7LeP.js";const V=()=>{const{params:s,setParams:a}=x(),[t,r]=l.useState(s.term??""),o=i=>{r(i.target.value)},n=()=>{t&&t.trim()?a({...s,term:t}):a({...s,term:void 0})};return l.useEffect(()=>{async function i(){r(s.term??"")}i()},[s.term]),e.jsx("div",{className:"mb-12",children:e.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:e.jsx(c,{icon:b,className:"text-mono-400 dark:text-mono-500"})}),e.jsx("input",{type:"text",placeholder:"Search by title or #tag...",value:t,onChange:o,className:`w-full pl-12 pr-24 py-4 bg-mono-50 dark:bg-mono-800 border border-mono-200 dark:border-mono-700 rounded-xl
                        focus:outline-none focus:border-primary-500 dark:focus:border-primary-400 focus:ring-2 focus:ring-primary-500/20
                        text-mono-900 dark:text-mono-100 placeholder-mono-400 dark:placeholder-mono-500
                        shadow-sm font-sans text-base`}),t&&e.jsx("button",{onClick:()=>{r(""),a({...s,term:void 0})},className:`absolute right-20 top-1/2 transform -translate-y-1/2 p-2 text-mono-400 hover:text-mono-600
                                 dark:text-mono-500 dark:hover:text-mono-300`,"aria-label":"Clear search",children:e.jsx(c,{icon:k,className:"w-4 h-4"})}),e.jsx("button",{onClick:n,className:`absolute right-2 top-1/2 transform -translate-y-1/2
                    px-6 py-2 rounded-lg font-medium bg-primary-500 hover:bg-primary-600
                    text-mono-50 shadow-md hover:shadow-lg cursor-pointer`,"aria-label":"Search",children:e.jsx(c,{icon:P,className:"w-4 h-4"})})]})})},d=()=>e.jsxs(j,{className:"w-full min-h-120 max-w-lg flex flex-col animate-pulse p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 my-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-mono-200 dark:bg-mono-700"}),e.jsx("div",{className:"flex-1 h-16 bg-mono-200 dark:bg-mono-700 rounded-3xl"})]}),e.jsx("div",{className:"h-10 bg-mono-200 dark:bg-mono-700 rounded-3xl flex grow"}),e.jsx("div",{className:"h-10 mt-4 bg-mono-200 dark:bg-mono-700 rounded-3xl"})]}),q=({message:s="No data found",subMessage:a="Try adjusting your search or filter to find what you're looking for",icon:t="inbox",className:r=""})=>{const o={search:b,inbox:w};return e.jsxs("div",{className:`flex flex-col items-center justify-center py-12 px-4 text-center select-none ${r}`,children:[e.jsx("div",{className:"mb-6",children:e.jsx(c,{icon:o[t],className:"text-mono-300 dark:text-mono-600 text-6xl"})}),e.jsx("h3",{className:"text-xl font-semibold text-mono-700 dark:text-mono-300 mb-2",children:s}),e.jsx("p",{className:"text-mono-500 dark:text-mono-400 max-w-md",children:a})]})},z=({currentPage:s,pageSize:a,total:t,searchTerm:r})=>{const o=t>0?(s-1)*a+1:0,n=Math.min(s*a,t);return e.jsxs("div",{className:"mb-6 text-sm text-mono-600 dark:text-mono-400",children:["Showing ",o,"-",n," of ",t," items",r&&e.jsxs("span",{className:"ml-2 text-primary-500 dark:text-primary-400",children:['(searching for "',r,'")']})]})},D=(s,a)=>{const t=[];if(a<=5)return Array.from({length:a},(i,m)=>m+1);t.push(1);let o=Math.max(2,s-1),n=Math.min(a-1,s+1);s<=3&&(n=4),s>=a-2&&(o=a-3),o>2&&t.push("...");for(let i=o;i<=n;i++)t.push(i);return n<a-1&&t.push("..."),a>1&&t.push(a),t},U=({totalPages:s,className:a})=>{const{params:t,setParams:r}=x(),o=t.page?parseInt(t.page):1,n=D(o,s);return e.jsxs(j,{className:y("items-center justify-between",a),children:[e.jsxs(p,{className:"flex items-center gap-2 text-sm",size:"small",variant:"link",disabled:o===1,onClick:()=>r({...t,page:(o-1).toString()}),children:[e.jsx(c,{icon:S}),"Previous"]}),e.jsx("div",{className:"hidden sm:flex",children:n.length>1&&e.jsx("div",{className:"flex items-center gap-1",children:n.map((i,m)=>e.jsx(_.Fragment,{children:i==="..."?e.jsx("span",{className:"px-3 py-2 text-gray-400 dark:text-gray-500 font-medium",children:"..."}):e.jsx(p,{onClick:()=>r({...t,page:i.toString()}),variant:o==i?"primary":"link",className:"px-4 py-3 rounded-xl text-sm",children:i})},m))})}),e.jsxs("div",{className:"sm:hidden text-sm",children:[o," out of ",s]}),e.jsxs(p,{className:"flex items-center gap-2 text-sm",size:"small",variant:"link",onClick:()=>r({...t,page:(o+1).toString()}),disabled:o===s,children:["Next",e.jsx(c,{icon:C})]})]})},M=(s,a,t)=>{const[r,o]=A(),n=()=>{const i=Object.keys(s).reduce((m,u)=>{const h=r.get(u);return h?m[u]=h:m[u]=void 0,m},{});i&&a(i)};l.useEffect(n,[r]),l.useEffect(()=>{if(!t)return;const i=new URLSearchParams;Object.keys(s).forEach(m=>{s[m]&&i.set(m,s[m])}),i.toString()!==r.toString()&&o(i)},[s,t])},O=()=>{const{user:s}=v(),{params:a,setParams:t,resetParams:r,initialized:o}=x();M(a,t,o);const n=L({queryKey:["posts",a,s?.id],queryFn:()=>E(),staleTime:1e3*60*5,retry:2,enabled:o});return l.useEffect(()=>{n.isError&&N.setQueryData(["posts",a],{posts:[],total:0})},[n.isError,a]),l.useEffect(()=>()=>{r()},[]),{...n,posts:n.data?.posts??[],total:n.data?.total??0,params:a,resetParams:r}},Q=l.lazy(()=>f(()=>import("./Filters-CimIQTUV.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),H=l.lazy(()=>f(()=>import("./AvailablePostCard--FnQQofK.js"),__vite__mapDeps([7,1,2,3,4,5,8,9,10,11,6,12]))),B=l.lazy(()=>f(()=>import("./UnavailablePostCard-BMRVFoQ1.js"),__vite__mapDeps([13,1,2,3,4,5,14,15,8,11,6,12]))),se=()=>{const{data:s,total:a,isLoading:t,params:r}=O(),{initialized:o}=x();return R("Home"),T("Home",r,o&&s&&!t),e.jsxs("div",{className:"container mx-auto px-4 max-w-7xl",children:[e.jsx(F,{title:"Marcy's Library",subtitle:"A collection of my manuscripts and scribbles..."}),e.jsx(V,{}),e.jsx(l.Suspense,{children:e.jsx(Q,{})}),e.jsx(z,{currentPage:r.page?parseInt(r.page):I,pageSize:r.limit?parseInt(r.limit):g,total:s?a:0,searchTerm:r.term}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8 justify-items-center",children:[!t&&s&&s.posts&&s.posts.length===0&&!t&&e.jsx(q,{className:"col-span-full"}),t&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{})]}),!t&&s&&s.posts&&s.posts.length>0&&s.posts.map(n=>n.title?e.jsx(l.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(H,{post:n})},n.id):e.jsx(l.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(B,{post:n})},n.id))]}),e.jsx(U,{className:"mt-6 p-2 flex",totalPages:Math.ceil(a/(r.limit?parseInt(r.limit):g))})]})};export{se as default};
